<!DOCTYPE html>
<html>
    <head>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" 
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
        crossorigin="anonymous">

        <link rel="stylesheet" href="CSS/style.css"/>

        <script type="module" src="https://code.jquery.com/jquery-3.6.1.slim.min.js" 
        integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" 
        crossorigin="anonymous">

        </script>


    </head>

    <body class="bg-dark">
      
        <!-- bg-dark is a bootstrap class -->
        <div class="card" id="login-card">

            <div class="card-body">

                <!--All these classes are predefined in bootstrap framework-->
                <h1>Notification Admin </h1>

                <form id="login-form">

                    <div class="form-group">

                        <label for="email">Email</label>
                        <!--
                            What does the for attribute does?
                            when we click on this label then it will focus on the input.

                            id name and for value will be same.
                        -->
                        <input type="email" id="email" class="form-control"/>

                    </div>

                    
                    <div class="form-group">

                        <label for="password">Password</label>
                        <!--
                            What does the for attribute does?
                            when we click on this label then it will focus on the input.

                            id name and for value will be same.
                        -->
                        <input type="password" id="password" class="form-control"/>

                    </div>

                    <div class="form-group">

                        <button type="button" class="btn btn-primary"  id="btn_login">
                           Login
                        </button>

                        <!--
                            btn btn-primary is the class for button
                        -->

                    </div>
                </form>
            </div>
        </div>
        
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
            import { getAuth,signInWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
              apiKey: "AIzaSyAIBuKnGJnFcFvhu4CAzzanHQoLxvuqYOo",
              authDomain: "androidnotification-7bbac.firebaseapp.com",
              databaseURL: "https://androidnotification-7bbac-default-rtdb.firebaseio.com",
              projectId: "androidnotification-7bbac",
              storageBucket: "androidnotification-7bbac.appspot.com",
              messagingSenderId: "457160157487",
              appId: "1:457160157487:web:171cd0aa1b01f5fe1a19da",
              measurementId: "G-39HZZJVGY3"
            };
          
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const authe= getAuth(app);


            document.getElementById("btn_login").addEventListener('click',function(){

                const email= document.getElementById("email").value;
                const password= document.getElementById("password").value;

                signInWithEmailAndPassword(authe, email, password)
                  .then((userCredential) => {
                 // Signed in 
                const user = userCredential.user;
                console.log("Created");

                window.location.href="admin.html";
                // ...
               })
              .catch((error) => {
               const errorCode = error.code;
               const errorMessage = error.message;
                console.log(errorCode + errorMessage);

            });

            })

          </script>


      <script type="module">
  
     import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";

     const auth = getAuth();
    onAuthStateChanged(auth, (user) => {
    if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    const uid = user.uid;
    // ...
    // We will open the admin page that we want to display
    window.location.href="admin.html";
    
  } else {
    // User is signed out
    // ...
  }
});

      </script>
        <!--
      You have to attached the script file inside the body
        -->
    </body>
</html>